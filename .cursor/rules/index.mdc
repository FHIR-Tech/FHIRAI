# FHIRAI - Cursor AI Project Index

## ğŸ—ï¸ Project Overview
**FHIRAI** - Clean Architecture ASP.NET Core app with CQRS, PostgreSQL, Azure deployment. Template: Clean.Architecture.Solution.Template v9.0.12.

## ğŸ“ Core Structure
```
src/
â”œâ”€â”€ Domain/           # Business entities, value objects, events
â”œâ”€â”€ Application/      # Commands, queries, handlers, DTOs  
â”œâ”€â”€ Infrastructure/   # Database, external services, identity
â””â”€â”€ Web/             # API endpoints, configuration
```

## ğŸ” Keyword Mapping to Documentation

### Architecture & Patterns
- **Clean Architecture** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Architecture Checklist
- **CQRS** â†’ `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` â†’ Implementation Patterns
- **SOLID** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Design Patterns Checklist
- **Domain-Driven Design** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Layer Responsibilities

### Development Workflow
- **New Feature** â†’ `docs/cursor-agent/workflows/IMPLEMENTATION_CHECKLIST.md` â†’ Feature Implementation Checklist
- **Code Generation** â†’ `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` â†’ Code Generation Commands
- **Testing** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Testing Rules
- **Code Review** â†’ `docs/cursor-agent/workflows/IMPLEMENTATION_CHECKLIST.md` â†’ Code Review Checklist

### Security & Authentication
- **Authentication** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Security & Authentication Rules
- **Authorization** â†’ `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` â†’ Security Rules
- **JWT** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Security & Authentication Rules
- **Azure Key Vault** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Security & Authentication Rules

### Database & Infrastructure
- **Entity Framework** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Database Rules
- **PostgreSQL** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ PostgreSQL Configuration
- **Migrations** â†’ `docs/cursor-agent/workflows/IMPLEMENTATION_CHECKLIST.md` â†’ Database Implementation
- **Azure Bicep** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Deployment Rules

### API Development
- **Endpoints** â†’ `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` â†’ Endpoint Pattern
- **Minimal APIs** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Presentation Layer Implementation
- **Swagger** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Code Quality Standards
- **Validation** â†’ `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` â†’ Command Pattern

### Code Quality
- **Naming Conventions** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Naming Conventions
- **Code Organization** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Code Quality Standards
- **Performance** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Performance Guidelines
- **Error Handling** â†’ `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` â†’ Common Mistakes

### Documentation & Reporting
- **Implementation Reports** â†’ `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` â†’ Cursor Agent Documentation Rules
- **API Documentation** â†’ `docs/api/` â†’ API specifications, guides, examples
- **Architecture Docs** â†’ `docs/architecture/` â†’ ADRs, diagrams, decisions
- **Session Logs** â†’ `docs/cursor-agent/logs/` â†’ Session tracking and audit trails

## ğŸš€ Quick Commands
```bash
# Build & Run
dotnet build -tl
cd ./src/Web/ && dotnet watch run

# Code Generation
dotnet new ca-usecase --name Create[Entity] --feature-name [FeatureName] --usecase-type command --return-type int
dotnet new ca-usecase -n Get[Entities] -fn [FeatureName] -ut query -rt [Entities]Vm

# Testing
dotnet test

# Azure Deployment
az login && azd up
```

## ğŸ“ Key File Locations
- **Domain Entities**: `src/Domain/Entities/`
- **Application Commands**: `src/Application/[FeatureName]/Commands/`
- **Application Queries**: `src/Application/[FeatureName]/Queries/`
- **API Endpoints**: `src/Web/Endpoints/`
- **Database Context**: `src/Infrastructure/Data/ApplicationDbContext.cs`
- **Infrastructure**: `infra/main.bicep`
- **API Documentation**: `docs/api/`
- **Implementation Reports**: `docs/cursor-agent/reports/`
- **Sample Data**: `scripts/samples/`
- **Cursor Agent Rules**: `docs/cursor-agent/workflows/`

## ğŸ·ï¸ Naming Patterns
- **Entities**: `{EntityName}.cs`
- **Commands**: `{CommandName}Command.cs`, `{CommandName}CommandHandler.cs`
- **Queries**: `{QueryName}Query.cs`, `{QueryName}QueryHandler.cs`
- **DTOs**: `{EntityName}Dto.cs`, `{EntityName}Vm.cs`
- **Endpoints**: `{EntityName}.cs`
- **Configurations**: `{EntityName}Configuration.cs`
- **Reports**: `{report-type}_{date}.md`
- **Samples**: `{resource-type}_{purpose}_{date}.json`

## ğŸ¯ Common Tasks Quick Guide

### Creating New Entity
1. **Domain**: Create entity in `src/Domain/Entities/`
2. **Application**: Create commands/queries in `src/Application/[FeatureName]/`
3. **Infrastructure**: Add to `ApplicationDbContext` and create configuration
4. **Web**: Create endpoints in `src/Web/Endpoints/`
5. **Samples**: Add sample data in `scripts/samples/resources/`
6. **Documentation**: Create API spec in `docs/api/specifications/`
7. **Report**: Generate implementation report in `docs/cursor-agent/reports/`

### Adding New Endpoint
1. Create endpoint class in `src/Web/Endpoints/`
2. Implement HTTP methods with authorization
3. Add to endpoint group mapping
4. Update OpenAPI documentation
5. Add examples in `docs/api/examples/`

### Database Changes
1. Update entity in Domain layer
2. Create EF Core configuration
3. Generate migration: `dotnet ef migrations add [MigrationName]`
4. Update database: `dotnet ef database update`
5. Update sample data if needed

### Creating Documentation
1. Use proper templates for reports
2. Include metadata (date, agent, session ID, status)
3. Follow exact naming conventions
4. Update documentation index
5. Cross-reference related documents

## ğŸš¨ Common Issues
- **Template Missing**: `dotnet new install Clean.Architecture.Solution.Template::9.0.12`
- **Build Issues**: Check `Directory.Packages.props` for version conflicts
- **Database Connection**: Verify connection string in `appsettings.Development.json`
- **Authentication**: Check JWT configuration and Azure Key Vault
- **Documentation**: Use proper templates and include metadata

## ğŸ“š Reference Documents
- **Navigation Guide**: `docs/DOCUMENTATION_STRUCTURE.md` - AI navigation guide
- **Development Rules**: `docs/cursor-agent/workflows/CURSOR_AI_RULES.md` - Comprehensive development guidelines
- **Quick Reference**: `docs/cursor-agent/workflows/CURSOR_AI_QUICK_REFERENCE.md` - Common patterns and commands
- **Implementation Guide**: `docs/cursor-agent/workflows/IMPLEMENTATION_CHECKLIST.md` - Step-by-step implementation
- **API Documentation**: `docs/api/` - API specifications, guides, examples
- **Cursor Agent Docs**: `docs/cursor-agent/` - Implementation reports, session logs

---

**ğŸ¯ Remember**: Always follow Clean Architecture principles, use CQRS pattern, implement proper validation and authorization, and maintain high test coverage. **Document everything** and maintain comprehensive audit trails for all changes. When in doubt, refer to existing implementations in `src/Application/TodoItems/` as reference patterns.
